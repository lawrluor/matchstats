<!-- Head to head page where one may begin querying head to head  -->

{% extends "base.html" %}

{% block content %}
<div class="container">
  <header class="jumbotron">
  <!-- <h1>View Head to Head Set History Between Two Players</h1> -->
  <form action="" method="post" name="head_to_head">
    {{ form.hidden_tag() }} <!-- this template argument will get replaced with hidden field that enables CSRF prevention in config. -->

    <div class="row"> 
      <div class="col-md-6">
        <h2 class="text-left">Player 1</h2>
      </div>

      <div class="col-md-6">
        <h2 class="text-right">Player 2</h2>
      </div>
    </div>

    <div class="row"> 
      <div class="col-md-3">
        <p class="text-left">{{ form.user1(size=15, class="form-control") }}</p>
      </div>

      <div class="col-md-6">
        <!-- Customized button input -->
        <p class="text-center"><input class="btn btn-primary btn-md" type="submit" value="Look up Head-to-Head"></p>
      </div>

      <div class="col-md-3">
        <p class="text-right">{{ form.user2(size=15, class="form-control") }}</p>
      </div>
    </div>

    {% for error in form.user1.errors or form.user2.errors %}
      <span style="color: red;">[{{error}}]</span>
    {% endfor %}

  </header>

    {% if tag1 != None and tag2 != None %} 
    <!--<h2>Head-to-Head between {{ tag1 }} and {{ tag2 }}</h2>-->
    <div class="panel panel-default">
    <div class="panel-heading">
      <h2><b> Stats </b></h2>
    </div>
    <div class="panel-body">

    <table class="table bootstrap-datatable">
      <thead>
        <tr>
          <th><b>Total Sets Played: {{ user1_set_win_count + user2_set_win_count }}</b></th>
          <th><b>Total Matches Played: {{ h2h_matches_played|length }}</b></th>
          <th><b>Stage Record: </b></th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>{{ tag1 }} [{{ user1_set_win_count }}-{{ user2_set_win_count }}] vs {{ tag2 }}</td>
          <td>{{ tag1 }} [{{ user1_match_win_count }}-{{ user2_match_win_count }}] vs {{ tag2 }}</td>
          <td>Battlefield: {{ h2h_stages_played["Battlefield"]|length }}</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td>Dream Land: {{ h2h_stages_played["Dreamland"]|length }}</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td>Final Destination: {{ h2h_stages_played["Final Destination"]|length }}</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td>Fountain of Dreams: {{ h2h_stages_played["Fountain of Dreams"]|length }}</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td>Yoshi's Story: {{ h2h_stages_played["Yoshi's Story"]|length }}</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td>Pokemon Stadium: {{ h2h_stages_played["Pokemon Stadium"]|length }}</td>
        </tr>
      </tbody>
      </table>

      </div>
      </div>

      <div class="panel panel-default">
      <div class="panel-heading">
        <h3> Set History </h3>
      </div>
      <div class="panel-body">
        
      <!-- "Table" column names -->
      <table class="table bootstrap-datatable">
        <thead>
          <tr>
            <th>
              <h4>Tournament</h4>
            </th>

            <th class="text-center">
              <h4>Result</h4>
            </th>

            <th>
            </th>

            <th>
            </th>
          </tr>
        </thead>

        <tbody>
          <!-- If variable set is empty, Jinja2 defaults to printing empy string; this is the case when viewing the form without having selected a head to head matchup -->
          {% for set in h2h_sets_played %}
      	    {% include 'set.html' %}
          {% endfor %}
        </tbody>
          </table>
            </div>
          </div>
        {% endif %}

  </form>
</div>
{% endblock %}
